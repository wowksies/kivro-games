<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
    <title>Playing...</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; touch-action: none; }
        iframe { width: 100vw; height: 100vh; border: none; display: block; }
        
        /* UI Overlay */
        .ui-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 0; z-index: 9999;
            pointer-events: none; /* Let clicks pass through to game */
        }

        /* Back Button */
        .back-btn {
            position: fixed; top: 20px; left: 20px;
            background: rgba(20, 20, 20, 0.8); color: white;
            padding: 10px 18px; border-radius: 30px;
            font-family: sans-serif; font-weight: bold; font-size: 14px; text-decoration: none;
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(4px); pointer-events: auto; cursor: pointer;
            transition: opacity 0.3s;
        }
        .back-btn:hover { background: rgba(50,50,50,0.9); }

        /* Panic Button */
        .panic-btn {
            position: fixed; bottom: 20px; right: 20px;
            width: 50px; height: 50px;
            background: #ef4444; color: white;
            border-radius: 50%; border: 2px solid rgba(255,255,255,0.2);
            font-weight: 900; font-size: 10px; font-family: sans-serif;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.5);
            display: flex; align-items: center; justify-content: center;
            pointer-events: auto; cursor: pointer;
        }
        .panic-btn:active { transform: scale(0.9); }
    </style>
</head>
<body>

    <div class="ui-layer">
        <a href="index.html" class="back-btn">‚Üê MENU</a>
        <button class="panic-btn" onclick="window.location.href='https://member.foodvillage.ie/login'">EXIT</button>
    </div>

    <iframe id="gameFrame" src="about:blank" allowfullscreen allow="autoplay; fullscreen; gamepad; accelerometer; gyroscope; payment; midi; sync-xhr; camera; microphone; keyboard-lock; pointer-lock"></iframe>

    <script>
        // --- GAME DATA (Must match index.html perfectly) ---
        const GITHUB_BASE = "https://raw.githack.com/HTML5GameArchive/gfiles/master/games/";
        
        const library = [
            { id: 5, url: "https://wowksies.github.io/kivro-Game-Library/2048/index.html" },
            { id: 7, url: "https://wowksies.github.io/kivro-Game-Library/btd4/index.html" },
            { id: 6, url: "https://wowksies.github.io/kivro-Game-Library/bitlife/index.html" },
            { id: 8, url: GITHUB_BASE + "chess/index.html" },
            { id: 9, url: GITHUB_BASE + "cookieclicker/index.html" },
            { id: 10, url: "https://wowksies.github.io/kivro-Game-Library/drivemad/index.html" },
            { id: 2, url: "https://wowksies.github.io/kivro-Game-Library/flappybird/index.html" },
            { id: 3, url: "https://geometryite.vercel.app/" },
            { id: 15, url: "https://raw.githack.com/KAYAZzz/kivro-library/main/Snake/index.html" },
            { id: 11, url: "https://wowksies.github.io/kivro-Game-Library/monkeymart/index.html" },
            { id: 12, url: GITHUB_BASE + "pacman/index.html" },
            { id: 1, url: GITHUB_BASE + "retrobowl/index.html" },
            { id: 14, url: "https://wowksies.github.io/kivro-Game-Library/Slope/index.html" },
            { id: 16, url: GITHUB_BASE + "snowbattle/index.html" },
            { id: 17, url: GITHUB_BASE + "stack/index.html" },
            { id: 4, url: "https://wowksies.github.io/kivro-Game-Library/DriftBoss/index.html" },
            { id: 18, url: "https://raw.githack.com/testingherokuapp/subwaysurfer/main/index.html" },
            { id: 19, url: GITHUB_BASE + "baldisbasics/index.html" },
            { id: 20, url: "https://wowksies.github.io/kivro-Game-Library/chromedino/index.html" },
            { id: 21, url: "https://wowksies.github.io/kivro-Game-Library/StickmanHook/index.html" },
            { id: 23, url: "https://wowksies.github.io/kivro-Game-Library/blockblast/index.html" },
            { id: 24, url: "https://wowksies.github.io/kivro-Game-Library/MergeRot/index.html" },
            { id: 25, url: "https://wowksies.github.io/kivro-Game-Library/HoleIO/index.html" },
            { id: 26, url: "https://wowksies.github.io/kivro-Game-Library/sausage-flip/index.html" },
            { id: 27, url: "https://wowksies.github.io/yohohoio/index.html" },
            { id: 28, url: "https://wowksies.github.io/kivro-Game-Library/MrBullet/index.html" },
            { id: 29, url: "https://raw.githack.com/selenite-cc/selenite-old/main/theimpossiblequiz/index.html" },
            { id: 30, url: GITHUB_BASE + "paperio/index.html" },
            { id: 31, url: "https://wowksies.github.io/kivro-Game-Library/HillClimbRacing/index.html" },
            { id: 34, url: "https://wowksies.github.io/kivro-Game-Library/BottleFlip2/index.html" },
            { id: 35, url: "https://wowksies.github.io/kivro-Game-Library/PenaltyKicks/index.html" },
            { id: 36, url: "https://wowksies.github.io/kivro-Game-Library/Gunspin/index.html" },
            { id: 37, url: "https://raw.githack.com/R74nCom/sandboxels/main/index.html" },
            { id: 38, url: "https://wowksies.github.io/kivro-Game-Library/Ballistic/index.html" },
            { id: 39, url: "https://wowksies.github.io/kivro-Game-Library/stacktris/index.html" },
            { id: 40, url: "https://raw.githack.com/HTML5GameArchive/gfiles/master/games/tombofthemask/index.html" },
            { id: 41, url: "https://wowksies.github.io/kivro-Game-Library/PaperFlight1/index.html" },
            { id: 42, url: "https://curverush.com/curve-rush.embed" },
            { id: 43, url: "https://burrito-bison-cnm.vercel.app/" },
            { id: 43, url: "https://golf-orbit-k8ue.vercel.app/" },
            { id: 44, url: "https://wowksies.github.io/kivro-Game-Library/Ragdoll-Archers/index.html" },
            { id: 45, url: "https://wowksies.github.io/kivro-Game-Library/helixjump/index.html" },
            { id: 46, url: "https://raw.githack.com/AnonymousBirb5100/polytrack/main/index.html" },
            { id: 47, url: "https://wowksies.github.io/kivro-Game-Library/Gobble/gobble/index.html" },
            { id: 48, url: "https://wowksies.github.io/kivro-Game-Library/Swingo/index.html" },
            { id: 49, url: "https://wowksies.github.io/kivro-Game-Library/spralr/index.html" },
            { id: 50, url: "https://wordle-actual.vercel.app" },
            { id: 51, url: "https://unicycleh.vercel.app" },
            { id: 52, url: "https://ubgfun.github.io/puzzle/hell-tile/" },
            { id: 53, url: "https://wowksies.github.io/kivro-Game-Library/game-inside/index.html" },
            { id: 54, url: "https://blackjack-self.vercel.app/" },
            { id: 55, url: "https://wowksies.github.io/kivro-Game-Library/raft-war/index.html" },
            { id: 56, url: "https://wowksies.github.io/kivro-Game-Library/a-smallwc/index.html" },
            { id: 57, url: "https://wowksies.github.io//bowmasters/index.html" },
            { id: 58, url: "https://stateactual.vercel.app/rvvASMiM/1701b2232f8c4f7689394f229bda07d7/index.html" },
            { id: 59, url: "https://wowksies.github.io/kivro-Game-Library/DayOfMeat/index.html" },
            { id: 60, url: "https://wowksies.github.io/kivro-Game-Library/knifehit/index.html" },
            { id: 61, url: "https://wowksies.github.io//solar-smash/index.html" },
            { id: 62, url: "https://wowksies.github.io//bridge-race/index.html" },
            { id: 63, url: "https://wowksies.github.io/kivro-Game-Library/papsp/index.html" },
            { id: 64, url: "https://wowksies.github.io/kivro-Game-Library/little-alchemy/index.html" },
            { id: 65, url: "https://wowksies.github.io/kivro-Game-Library/pool-pixijs/index.html" },
            { id: 66, url: "https://wowksies.github.io//stealth-master/index.html" },
            { id: 67, url: "https://wowksies.github.io/kivro-Game-Library/hideandseek/8328750458724478102.playables.usercontent.goog/v/assets/index.html" },
            { id: 68, url: "https://wowksies.github.io//slice-it-all/index.html" },
            { id: 69, url: "https://gamesbun.github.io/busout-school/" },
            { id: 70, url: "https://wowksies.github.io/kivro-Game-Library/blumgir/index.html" },
            { id: 71, url: "https://hillofsteele.vercel.app/" },
            { id: 72, url: "https://wowksies.github.io/kivro-Game-Library/rooftopsnipers/index.html" },
            { id: 72, url: "https://wowksies.github.io//bouncemasters/index.html" },
            { id: 73, url: "https://wowksies.github.io/kivro-Game-Library/blumgiball/index.html" },
            { id: 74, url: "https://wowksies.github.io/kivro-Game-Library/DrawJoustindex.html" },
            { id: 74, url: "https://wowksies.github.io/kivro-Game-Library/basketball-legends-main/index.html" },
            { id: 75, url: "https://wowksies.github.io/kivro-Game-Library/football-legends/index.html" },
            { id: 76, url: "https://wowksies.github.io//crossy-road/index.html" },
            { id: 77, url: "https://wowksies.github.io/getaway-shootout/index.html" },
            
            // APPS
            { id: 1001, url: "https://your-app-url.com" }
        ];

        // 1. Get Game ID from URL
        const params = new URLSearchParams(window.location.search);
        const gameId = parseInt(params.get('id'));

        // 2. Find Game
        const game = library.find(g => g.id === gameId);

        if (game) {
            const iframe = document.getElementById('gameFrame');
            iframe.src = game.url;
            
            // iPad Fix: Focus the iframe immediately so keyboard/touch works
            iframe.onload = function() {
                iframe.contentWindow.focus();
            };
        } else {
            alert("Game not found!");
            window.location.href = "index.html";
        }
    </script>

</body>
</html>
